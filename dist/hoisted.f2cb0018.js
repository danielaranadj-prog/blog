import"./chunks/CookieConsent.astro_astro_type_script_index_0_lang.ccb72929.js";/* empty css                              */function b(){const n=document.getElementById("search-overlay"),s=document.getElementById("search-input"),o=document.getElementById("results-list"),l=document.getElementById("search-empty"),m=document.getElementById("search-recent"),L=document.getElementById("recent-searches");if(!n||!s)return;let a=[],r=JSON.parse(localStorage.getItem("blogRecentSearches")||"[]"),c=-1;function p(){const e=[];document.querySelectorAll("[data-search-post]").forEach(t=>{const g=t.getAttribute("data-search-tags")||"";e.push({type:"post",title:t.getAttribute("data-search-post"),url:t.getAttribute("href")||t.getAttribute("data-search-url"),icon:"\u{1F4DD}",description:t.getAttribute("data-search-desc")||"",tags:g})}),document.querySelectorAll("[data-search-destination]").forEach(t=>{e.push({type:"destination",title:t.getAttribute("data-search-destination"),url:t.getAttribute("href"),icon:"\u{1F4CD}",description:t.getAttribute("data-search-desc")||""})}),document.querySelectorAll("[data-search-category]").forEach(t=>{e.push({type:"category",title:t.getAttribute("data-search-category"),url:t.getAttribute("href"),icon:"\u{1F3F7}\uFE0F",description:t.getAttribute("data-search-desc")||""})}),a=e}function u(){n.classList.add("search-open"),document.body.style.overflow="hidden",setTimeout(()=>s.focus(),100),i()}function h(){n.classList.remove("search-open"),document.body.style.overflow="",s.value="",o.innerHTML="",o.style.display="none",l.style.display="block",c=-1}function i(){if(r.length===0){m.style.display="none";return}m.style.display="block",L.innerHTML=r.slice(0,5).map((e,t)=>`
        <div class="search-result-item" data-recent-index="${t}">
          <i class="fas fa-history result-icon"></i>
          <div class="result-content">
            <div class="result-title">${e}</div>
          </div>
        </div>
      `).join(""),L.querySelectorAll(".search-result-item").forEach(e=>{e.addEventListener("click",()=>{const t=r[e.getAttribute("data-recent-index")];s.value=t,w(t)})})}function w(e){if(!e||e.length<2){o.style.display="none",l.style.display="block",m.style.display=r.length>0?"block":"none";return}const t=e.toLowerCase(),g=a.filter(d=>d.title.toLowerCase().includes(t)||d.description.toLowerCase().includes(t)||d.tags&&d.tags.toLowerCase().includes(t)).slice(0,8);if(g.length===0){o.innerHTML=`
          <div class="search-no-results">
            <i class="fas fa-search"></i>
            <p>No se encontraron resultados para "${e}"</p>
          </div>
        `,o.style.display="block",l.style.display="none",m.style.display="none";return}o.innerHTML=g.map((d,A)=>`
        <a href="${d.url}" class="search-result-item ${A===0?"selected":""}" data-result-index="${A}">
          <span class="result-icon">${d.icon}</span>
          <div class="result-content">
            <div class="result-title">${y(d.title,e)}</div>
            ${d.description?`<div class="result-desc">${y(E(d.description,80),e)}</div>`:""}
          </div>
          <span class="result-type">${d.type}</span>
        </a>
      `).join(""),o.style.display="block",l.style.display="none",m.style.display="none",c=0,k(e)}function y(e,t){const g=new RegExp(`(${t})`,"gi");return e.replace(g,"<mark>$1</mark>")}function E(e,t){return e.length>t?e.substring(0,t)+"...":e}function k(e){r.includes(e)||(r.unshift(e),r=r.slice(0,10),localStorage.setItem("blogRecentSearches",JSON.stringify(r)))}function S(e){const t=o.querySelectorAll(".search-result-item");t.length!==0&&(t[c]?.classList.remove("selected"),e==="down"?c=(c+1)%t.length:c=c<=0?t.length-1:c-1,t[c]?.classList.add("selected"),t[c]?.scrollIntoView({block:"nearest",behavior:"smooth"}))}function f(){const t=o.querySelectorAll(".search-result-item")[c];t&&t.click()}document.addEventListener("keydown",e=>{(e.metaKey||e.ctrlKey)&&e.key==="k"&&(e.preventDefault(),u()),e.key==="Escape"&&n.classList.contains("search-open")&&h()}),document.addEventListener("keydown",e=>{e.key==="/"&&!n.classList.contains("search-open")&&document.activeElement.tagName!=="INPUT"&&document.activeElement.tagName!=="TEXTAREA"&&(e.preventDefault(),u())}),n.addEventListener("click",e=>{e.target===n&&h()}),s.addEventListener("input",e=>{w(e.target.value)}),s.addEventListener("keydown",e=>{e.key==="ArrowDown"?(e.preventDefault(),S("down")):e.key==="ArrowUp"?(e.preventDefault(),S("up")):e.key==="Enter"&&(e.preventDefault(),f())}),p(),document.addEventListener("astro:page-load",p)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",b):b();document.addEventListener("astro:page-load",b);async function D(){if(!navigator.webdriver)try{const n={type:"page_view",path:window.location.pathname,title:document.title,referrer:document.referrer||"",screenSize:`${window.innerWidth}x${window.innerHeight}`};await fetch("/api/analytics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})}catch(n){console.error("Analytics Error:",n)}}D();document.addEventListener("astro:page-load",D);function I(){const n=document.querySelector(".prose"),s=document.getElementById("toc-list");if(!n||!s)return;s.innerHTML="";const l=document.querySelector(".prose").querySelectorAll("h2, h3");if(l.length===0){document.querySelector(".toc-container").style.display="none";return}l.forEach((a,r)=>{if(!a.id){const y=a.textContent.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"");a.id=`${y}-${r}`}const c=a.tagName.toLowerCase(),p=a.textContent,u=a.id,h=document.createElement("li");h.classList.add("toc-item",c);const i=document.createElement("a");i.href=`#${u}`,i.textContent=p;const w=window.matchMedia("(prefers-color-scheme: dark)").matches;c==="h2"?(i.style.color=w?"rgba(241, 245, 249, 0.95)":"#2D3748",i.style.fontWeight="600"):i.style.color=w?"rgba(203, 213, 225, 0.85)":"#718096",i.style.textDecoration="none",i.addEventListener("click",y=>{y.preventDefault();const E=document.getElementById(u);if(E){const S=E.getBoundingClientRect().top+window.pageYOffset+-100;window.scrollTo({top:S,behavior:"smooth"}),document.querySelectorAll(".toc-item a").forEach(f=>{f.classList.remove("active");const e=f.closest(".toc-item").classList.contains("h2")?"h2":"h3",t=window.matchMedia("(prefers-color-scheme: dark)").matches;e==="h2"?f.style.color=t?"rgba(241, 245, 249, 0.95)":"#2D3748":f.style.color=t?"rgba(203, 213, 225, 0.85)":"#718096"}),i.classList.add("active"),i.style.color="#F4B942",history.pushState(null,null,`#${u}`)}}),h.appendChild(i),s.appendChild(h)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",C);const L=new IntersectionObserver(a=>{a.forEach(r=>{if(r.isIntersecting){const c=r.target.id,p=s.querySelector(`a[href="#${c}"]`);p&&(s.querySelectorAll("a").forEach(u=>u.classList.remove("active")),p.classList.add("active"))}})},{rootMargin:"-100px 0px -66% 0px"});headers.forEach(a=>L.observe(a))}function C(){const n=window.matchMedia("(prefers-color-scheme: dark)").matches;document.querySelectorAll(".toc-item a").forEach(s=>{if(s.classList.contains("active")){s.style.color="#F4B942";return}(s.closest(".toc-item").classList.contains("h2")?"h2":"h3")==="h2"?s.style.color=n?"rgba(241, 245, 249, 0.95)":"#2D3748":s.style.color=n?"rgba(203, 213, 225, 0.85)":"#718096"})}I();document.addEventListener("astro:page-load",I);function $(){document.querySelectorAll(".copy-link").forEach(s=>{s.addEventListener("click",async()=>{const o=s.getAttribute("data-url");if(!!o)try{await navigator.clipboard.writeText(o);const l=s.innerHTML;s.innerHTML=`
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="20 6 9 17 4 12"/>
            </svg>
            ${s.querySelector("span")?"<span>\xA1Copiado!</span>":""}
          `,s.classList.add("copied"),setTimeout(()=>{s.innerHTML=l,s.classList.remove("copied")},2e3)}catch(l){console.error("Error al copiar:",l)}})})}$();document.addEventListener("astro:page-load",$);let v=null;window.addEventListener("beforeinstallprompt",n=>{n.preventDefault(),v=n,localStorage.getItem("pwa-prompt-dismissed")||setTimeout(()=>{const o=document.getElementById("pwa-install-prompt");o&&o.classList.remove("hidden")},3e3)});document.getElementById("install-btn")?.addEventListener("click",async()=>{if(!v)return;v.prompt();const n=await v.userChoice;console.log(`[PWA] User ${n.outcome==="accepted"?"accepted":"dismissed"} the install prompt`);const s=document.getElementById("pwa-install-prompt");s&&s.classList.add("hidden"),v=null});document.getElementById("dismiss-btn")?.addEventListener("click",()=>{const n=document.getElementById("pwa-install-prompt");n&&n.classList.add("hidden");const s=new Date;s.setDate(s.getDate()+7),localStorage.setItem("pwa-prompt-dismissed",s.toISOString())});window.addEventListener("appinstalled",()=>{console.log("[PWA] App was installed successfully"),v=null;const n=document.getElementById("pwa-install-prompt");n&&n.classList.add("hidden")});
