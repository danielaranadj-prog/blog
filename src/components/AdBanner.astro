---
// src/components/AdBanner.astro

interface Props {
  position: 'header' | 'footer' | 'sidebar' | 'in-content';
}

const { position } = Astro.props;

// --- CONFIGURACIÓN MAESTRA ---

// 1. ¿ACTIVAR ADSENSE? (Si está en true, mostramos anuncios reales)
const ENABLE_ADSENSE = true; 

// 2. TU ID DE EDITOR
const AD_CLIENT_ID = "ca-pub-5650296070135561";

// 3. TUS SLOTS (IDs reales de tus anuncios)
const adSlots = {
  // ✅ HEADER (Banner Superior)
  header:      "2472256609", 

  // ✅ FOOTER (Banner Inferior)
  footer:      "8654521571", 

  // ✅ SIDEBAR (Cuadrado Lateral - Nuevo)
  sidebar:     "4305063089", 
  
  // Para dentro del contenido, usamos el del Sidebar que es flexible
  'in-content':"4305063089"  
};

// --- CONFIGURACIÓN DE PLACEHOLDERS (Se ven solo si AdSense falla o carga lento) ---
const placeholders = {
  header: {
    label: 'Publicidad',
    size: { width: '728px', height: '90px' },
    img: 'https://placehold.co/728x90/75AADB/ffffff?text=Anuncio+Top',
    styleClass: 'ad-horizontal'
  },
  footer: {
    label: 'Publicidad',
    size: { width: '728px', height: '90px' },
    img: 'https://placehold.co/728x90/F4B942/1A202C?text=Anuncio+Footer',
    styleClass: 'ad-horizontal'
  },
  sidebar: {
    label: 'Publicidad',
    size: { width: '300px', height: '250px' },
    img: 'https://placehold.co/300x250/2D3748/ffffff?text=Anuncio+Lateral',
    styleClass: 'ad-square'
  },
  'in-content': {
    label: 'Te podría interesar',
    size: { width: '100%', height: 'auto' },
    img: 'https://placehold.co/600x150/E2E8F0/2D3748?text=Publicidad',
    styleClass: 'ad-fluid'
  }
};

const currentPlace = placeholders[position];
const currentSlot = adSlots[position];

// Validamos que exista un slot real
const showAdsense = ENABLE_ADSENSE && currentSlot;
---

<div class={`ad-wrapper ${currentPlace.styleClass}`}>
    <span class="ad-label">{currentPlace.label}</span>

    {showAdsense ? (
        /* --- MODO ADSENSE REAL --- */
        <div class="adsense-container">
            <ins class="adsbygoogle"
                style="display:block"
                data-ad-client={AD_CLIENT_ID}
                data-ad-slot={currentSlot}
                data-ad-format="auto"
                data-full-width-responsive="true">
            </ins>
            <script is:inline>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
    ) : (
        /* --- MODO PLACEHOLDER (DISEÑO) --- */
        <div class="placeholder-container">
            <img 
                src={currentPlace.img} 
                alt="Espacio Publicitario" 
                class="ad-placeholder-img"
                loading="lazy"
            />
        </div>
    )}
</div>

<style>
    .ad-wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin: 2rem 0;
        width: 100%;
        min-height: 100px; /* Evita saltos de layout (CLS) */
    }

    .ad-label {
        font-family: 'Montserrat', sans-serif;
        font-size: 0.6rem;
        text-transform: uppercase;
        color: #cbd5e0;
        margin-bottom: 0.5rem;
        letter-spacing: 1px;
    }

    .ad-placeholder-img {
        display: block;
        border-radius: 4px;
        max-width: 100%;
        height: auto;
        opacity: 0.8;
    }

    .adsense-container {
        width: 100%;
        background: rgba(0,0,0,0.02); /* Fondo sutil mientras carga */
        min-height: 90px;
        display: flex;
        justify-content: center;
        text-align: center;
    }

    /* Variantes de Tamaño */
    .ad-horizontal .adsense-container,
    .ad-horizontal .ad-placeholder-img {
        max-width: 728px;
    }

    .ad-square .adsense-container,
    .ad-square .ad-placeholder-img {
        max-width: 300px;
    }
    
    .ad-fluid .adsense-container {
        width: 100%;
    }

    /* Ajuste Móvil */
    @media (max-width: 768px) {
        .ad-horizontal .adsense-container { max-width: 100%; }
    }
</style>